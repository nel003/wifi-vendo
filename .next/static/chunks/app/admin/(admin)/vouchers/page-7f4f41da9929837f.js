(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8979],{4486:(e,s,r)=>{Promise.resolve().then(r.bind(r,9577))},9577:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),a=r(4085),l=r(2079),i=r(241),d=r(2651),n=r(4683),c=r(2115),o=r(7837),h=r(5785),u=r(745),x=r(5858);function m(){let[e,s]=(0,c.useState)([]),[r,m]=(0,c.useState)([]),{toast:p}=(0,i.dj)(),[j,f]=(0,c.useState)(""),[y,w]=(0,c.useState)(!1),[N,g]=(0,c.useState)("");console.log(r);let v=(0,c.useCallback)(async()=>{try{let e=await d.A.get("/api/admin/rates");s(e.data)}catch(e){console.error(e),p({title:"Error",description:"Failed to fetch rates"})}},[s,p]),b=(0,c.useCallback)(async()=>{try{let e=(await d.A.get("/api/admin/vouchers")).data.map(e=>({...e,hidden:!0}));m(e)}catch(e){console.error(e),p({title:"Error",description:"Failed to fetch vouchers"})}},[m,p]);async function C(){p({title:"Processing",description:"Please wait while adding the rate"});try{let e=await d.A.post("/api/admin/vouchers",{rate:j});p({title:"Success",description:"Voucher added successfully"}),b(),g(e.data.voucher),w(!0)}catch(e){console.error(e),p({title:"Error",description:"Failed to create voucher"})}}async function A(e){p({title:"Processing",description:"Please wait while deleting the voucher"});try{await d.A.delete("/api/admin/vouchers?id=".concat(e)),p({title:"Success",description:"Voucher deleted successfully"}),b()}catch(e){console.error(e),p({title:"Error",description:"Failed to delete voucher"})}}return(0,c.useEffect)(()=>{v(),b()},[v,b]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("h1",{className:"text-lg font-bold ml-[7px]",children:"Voucher"}),(0,t.jsxs)(o.lG,{children:[(0,t.jsx)(o.zM,{asChild:!0,children:(0,t.jsxs)(a.$,{variant:"outline",className:"ml-[7px]",children:[(0,t.jsx)(n.A,{}),"Create Voucher"]})}),(0,t.jsxs)(o.Cf,{children:[(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{children:"New Vouchers"}),(0,t.jsx)(o.rr,{children:"Please check the details before submitting."})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(h.J,{children:"Rate"}),(0,t.jsxs)(u.l6,{onValueChange:e=>f(e),children:[(0,t.jsx)(u.bq,{className:"w-full",children:(0,t.jsx)(u.yv,{placeholder:"Select a rate"})}),(0,t.jsx)(u.gC,{children:e.map(e=>(0,t.jsx)(u.eb,{value:e.id.toString(),children:e.name},e.id))})]})]})}),(0,t.jsx)(o.Es,{children:(0,t.jsx)(o.HM,{asChild:!0,children:(0,t.jsx)(a.$,{onClick:C,disabled:""==j,children:"Submit"})})})]})]})]}),(0,t.jsxs)(l.XI,{className:"w-full",children:[(0,t.jsx)(l.r6,{children:"A list of vouchers."}),(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{className:"w-[100px]",children:"ID"}),(0,t.jsx)(l.nd,{children:"Voucher"}),(0,t.jsx)(l.nd,{children:"Price"}),(0,t.jsx)(l.nd,{children:"Time"}),(0,t.jsx)(l.nd,{className:"text-right",children:"Used"}),(0,t.jsx)(l.nd,{className:""})]})}),(0,t.jsx)(l.BF,{children:r.map(e=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{children:e.id}),(0,t.jsx)(l.nA,{onClick:()=>m(r.map(s=>({...s,hidden:s.id===e.id?!s.hidden:s.hidden}))),children:e.hidden?e.voucher.slice(0,1)+"*****":e.voucher}),(0,t.jsx)(l.nA,{children:e.price.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),(0,t.jsx)(l.nA,{children:e.time}),(0,t.jsx)(l.nA,{className:"text-right",children:e.used?"True":"False"}),(0,t.jsx)(l.nA,{className:"flex justify-end gap-3",children:(0,t.jsxs)(x.Lt,{children:[(0,t.jsx)(x.tv,{asChild:!0,children:(0,t.jsx)(a.$,{children:"Delete"})}),(0,t.jsxs)(x.EO,{children:[(0,t.jsxs)(x.wd,{children:[(0,t.jsx)(x.r7,{children:"Are you absolutely sure?"}),(0,t.jsx)(x.$v,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),(0,t.jsxs)(x.ck,{children:[(0,t.jsx)(x.Zr,{children:"Cancel"}),(0,t.jsx)(x.Rx,{onClick:()=>A(e.id),children:"Continue"})]})]})]})})]},e.id))})]})]}),(0,t.jsx)(o.lG,{open:y,onOpenChange:e=>w(e),children:(0,t.jsx)(o.Cf,{children:(0,t.jsxs)(o.c7,{children:[(0,t.jsx)(o.L3,{className:"text-center",children:"Voucher Created"}),(0,t.jsx)(o.rr,{className:"text-center",children:"Voucher has been created successfully. Here is the voucher code."}),(0,t.jsx)("div",{className:"py-12",children:(0,t.jsxs)("h1",{className:"text-center w-full text-5xl",children:[N.slice(0,3)," - ",N.slice(3,6)]})})]})})})]})}},745:(e,s,r)=>{"use strict";r.d(s,{bq:()=>u,eb:()=>j,gC:()=>p,l6:()=>o,yv:()=>h});var t=r(5155),a=r(2115),l=r(3434),i=r(2645),d=r(2488),n=r(7193),c=r(9602);let o=l.bL;l.YJ;let h=l.WT,u=a.forwardRef((e,s)=>{let{className:r,children:a,...d}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...d,children:[a,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=l.wn.displayName;let p=a.forwardRef((e,s)=>{let{className:r,children:a,position:i="popper",...d}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...d,children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,t.jsx)(m,{})]})})});p.displayName=l.UC.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r),...a})}).displayName=l.JU.displayName;let j=a.forwardRef((e,s)=>{let{className:r,children:a,...i}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:a})]})});j.displayName=l.q7.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=l.wv.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,2651,7169,6217,7016,817,5828,8441,1517,7358],()=>s(4486)),_N_E=e.O()}]);