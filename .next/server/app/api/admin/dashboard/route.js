(()=>{var e={};e.id=7426,e.ids=[7426],e.modules={28303:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=28303,e.exports=r},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},41204:e=>{"use strict";e.exports=require("string_decoder")},66136:e=>{"use strict";e.exports=require("timers")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},54381:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>x,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>v});var s={};t.r(s),t.d(s,{GET:()=>d});var i=t(42706),o=t(28203),n=t(45994),u=t(26714),a=t(21820),c=t.n(a),p=t(79646);async function d(e){try{let e=function(){let e=c().totalmem();return((e-c().freemem())/e*100).toFixed(2)}(),[r,t]=await Promise.all([new Promise(e=>{let r=c().cpus();setTimeout(()=>{let t=c().cpus(),s=0,i=0;for(let e=0;e<r.length;e++){let o=r[e].times,n=t[e].times,u=o.user+o.nice+o.sys+o.idle+o.irq;s+=n.user+n.nice+n.sys+n.idle+n.irq-u,i+=n.idle-o.idle}e(((1-i/s)*100).toFixed(2))},1e3)}),new Promise((e,r)=>{(0,p.exec)("df -h --output=pcent / | tail -1",(t,s)=>{t?r("Error getting storage info"):e(s.trim().replace("%",""))})})]),[s]=await u.A.query(`
          SELECT 
              v.voucher_count,
              IFNULL(v.v_earnings, 0) AS v_earnings,
              IFNULL(c.c_earnings, 0) AS c_earnings,
              (IFNULL(v.v_earnings, 0) + IFNULL(c.c_earnings, 0)) AS sales,
              (SELECT COUNT(id) FROM vouchers WHERE used = 1) AS used_count,
              (SELECT COUNT(id) FROM rates) AS rate_count,
              (SELECT COUNT(id) FROM clients) AS client_count
          FROM 
              (SELECT COUNT(id) AS voucher_count, SUM(price) AS v_earnings FROM vouchers) v,
              (SELECT SUM(amount) AS c_earnings FROM transactions) c;
        `);return Response.json({ramUsage:e,cpuUsage:r,storageUsage:t,...s[0]},{status:200})}catch(e){return console.log(e),Response.json({msg:"Something went wrong!"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/admin/dashboard/route",pathname:"/api/admin/dashboard",filename:"route",bundlePath:"app/api/admin/dashboard/route"},resolvedPagePath:"/root/wifi-vendo/app/api/admin/dashboard/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:v,serverHooks:x}=l;function g(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:v})}},96487:()=>{},78335:()=>{},26714:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(60820);global._mysqlPool||(global._mysqlPool=s.createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0}));let i=global._mysqlPool}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[5994,6505],()=>t(54381));module.exports=s})();